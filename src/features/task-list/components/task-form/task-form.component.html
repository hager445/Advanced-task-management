<div class="form-container">
  <div class="form-card">
    <div class="form-header">
      <!-- <div class="form-icon">
        <i class="fas fa-plus-circle"></i>
      </div> -->
      <h1 class="form-title">Create New Task</h1>
      <p class="form-subtitle">Add a new task to your workflow</p>
    </div>

    <div class="form-content">
      <form id="taskForm" [formGroup]="inputsForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Task Title</label>
            <input
              type="text"
              class="form-input"
              formControlName="title"
              placeholder="Enter task title..."
              required
            />
            <div class="form-validation">
              <i class="fas fa-exclamation-circle"></i>
              <span>Task title is required</span>
            </div>
          </div>
          <!-- Assignee Dropdown -->

          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-user-tag"></i>
              Assignee
            </label>
            <button
              type="button"
              class="assignee-btn"
              (click)="openSearchModel()"
            >
              <i class="fas fa-user-plus"></i>
              {{
                $selectedtaskMember()
                  ? $selectedtaskMember().user_name
                  : "Assign Member"
              }}
            </button>
          </div>
        </div>

        <div class="form-row full-width">
          <div class="form-group">
            <label class="form-label">Description</label>
            <textarea
              class="form-textarea"
              formControlName="description"
              placeholder="Describe your task in detail..."
              rows="4"
            ></textarea>
          </div>
        </div>

        <div class="form-row full-width">
          <div class="form-group">
            <label class="form-label">status Level</label>
            <input
              type="text"
              name="status"
              id=""
              formControlName="status"
              style="display: none"
            />
            <div class="status-selector">
              @for (st of statusList; track $index) {
              <div
                class="status-option"
                (click)="selectOption('status', st.value)"
                [class.active]="st.value === inputsForm.get('status')?.value"
                [class]="st.value"
                [attr.data-status]="st.value"
              >
                <i class="fas" [class]="st.icon"></i> {{ st.label }}
              </div>
              }
            </div>
          </div>
        </div>

        <div class="form-row full-width">
          <div class="form-group">
            <label class="form-label">Priority Level</label>
            <div class="priority-selector">
              @for (pr of priorities; track $index) {
              <div
                class="priority-option"
                [class]="pr.value"
                [class.active]="pr.value === inputsForm.get('priority')?.value"
                [attr.data-priority]="pr.value"
                (click)="selectOption('priority', pr.value)"
              >
                <i class="fas" [class]="pr.icon"></i> {{ pr.label }}
              </div>
              }
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Due Date</label>
            <input
              formControlName="due_date"
              type="date"
              class="form-input"
              required
            />
          </div>
        </div>
        <div class="form-actions">
          <button
            routerLink="/alltasks"
            type="button"
            class="btn btn-secondary"
          >
            <i class="fas fa-times"></i>
            Cancel
          </button>
          @if (!$isEditTaskForm()) {

          <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i>
            Create Task
          </button>
          }@else {

          <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i>
            Update Task
          </button>
          }
        </div>
      </form>
    </div>
  </div>
</div>
