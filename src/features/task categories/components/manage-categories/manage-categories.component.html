<!-- Form Overlay -->
<div class="form-overlay" id="formOverlay" [class]="formIsOpened ? 'show' : ''">
  <div class="category-form">
    <!-- Form Header -->
    <div class="form-header">
      <div class="form-title-section">
        <div class="form-icon">
          <i class="fas fa-folder-plus"></i>
        </div>
        <span class="form-title" id="formTitle">Add New Category</span>
      </div>
      <button class="close-btn" (click)="hideForm()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- Form Content -->
    <form
      id="categoryForm"
      [formGroup]="inputsForm"
      (ngSubmit)="onSubmitForm()"
    >
      <!-- Category Name -->
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-tag"></i>
          Category Name
        </label>
        <input
          type="text"
          class="form-input"
          id="categoryName"
          formControlName="name"
          placeholder="Enter category name..."
          maxlength="50"
          required
          minlength="2"
        />
        <div class="char-counter" id="charCounter">0/50</div>
        @if (inputsForm.touched && inputsForm.get('name')?.errors?.['required'])
        {

        <div class="error-message" id="nameError">
          <i class="fas fa-exclamation-circle"></i>
          <span id="nameErrorText">Category name is required</span>
        </div>
        }
      </div>

      <!-- Color Picker -->
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-palette"></i>
          Choose Color
        </label>
        <input type="text" formControlName="color" class="hidden-input" />
        <div class="color-picker">
          <div
            #colorOption
            class="color-option selected"
            style="background: #3b82f6"
            data-color="#3b82f6"
            (click)="pickCategoryColor('#3b82f6')"
          >
            <i class="fas fa-check"></i>
          </div>
          <div
            #colorOption
            class="color-option"
            style="background: #10b981"
            data-color="#10b981"
            (click)="pickCategoryColor('#10b981')"
          ></div>
          <div
            #colorOption
            class="color-option"
            style="background: #f59e0b"
            data-color="#f59e0b"
            (click)="pickCategoryColor('#f59e0b')"
          ></div>
          <div
            #colorOption
            class="color-option"
            style="background: #ef4444"
            data-color="#ef4444"
            (click)="pickCategoryColor('#ef4444')"
          ></div>
          <div
            #colorOption
            class="color-option"
            style="background: #8b5cf6"
            data-color="#8b5cf6"
            (click)="pickCategoryColor('#8b5cf6')"
          ></div>
          <div
            #colorOption
            class="color-option"
            style="background: #06b6d4"
            data-color="#06b6d4"
            (click)="pickCategoryColor('#06b6d4')"
          ></div>
          <div
            #colorOption
            class="color-option"
            style="background: #f97316"
            data-color="#f97316"
            (click)="pickCategoryColor('#f97316')"
          ></div>
          <div
            #colorOption
            class="color-option"
            style="background: #84cc16"
            data-color="#84cc16"
            (click)="pickCategoryColor('#84cc16')"
          ></div>
        </div>
        @if (inputsForm.touched &&inputsForm.get('color')?.errors?.['required'])
        {

        <div class="error-message" id="nameError">
          <i class="fas fa-exclamation-circle"></i>
          <span id="nameErrorText">Category Color is required</span>
        </div>
        }
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" class="cancel-btn" onclick="hideForm()">
          <i class="fas fa-times"></i>
          Cancel
        </button>
        <button type="submit" class="save-btn" id="saveBtn">
          <i class="fas fa-save"></i>
          Save Category
        </button>
      </div>
    </form>
  </div>
</div>
